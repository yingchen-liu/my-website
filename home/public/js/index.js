var base=$("#var-base").val();if(editormd.emoji={path:base+"/emojis/",ext:".png"},editormd.markdownToHTML("introduction-body",{markdown:$("#introduction-content").val(),path:base+"/js/markdown/lib/",htmlDecode:"style,script,iframe",emoji:!0}),"true"===$("#var-editing-mode").val()){Dropzone.autoDiscover=!1;var editor=editormd("introduction-editor",{height:353,watch:!1,dialogLockScreen:!1,path:base+"/js/markdown/lib/",pluginPath:base+"/js/markdown/plugins/",htmlDecode:"style,script,iframe",emoji:!0,toolbarIcons:"mini"});$(".skill-list").each(function(){var o=$(this);o.sortable({items:"> .skill-item",opacity:.5,handle:".btn-sort-skill"}).on("sortstop",function(e,a){var n=a.item.find("form");n.addClass("loading");var t=[];o.find(".skill-item").each(function(e,a){var n=$(a).find("[name=id]").val();t.push(n)}),$.post(base+"/skills/sort",{sort:JSON.stringify(t)}).done(function(e){n.removeClass("loading")}).fail(function(e){n.removeClass("loading"),showFormError(n,getError(e))})})}),$(".btn-add-skill-type").click(function(){var a=$(this).closest("form");a.addClass("loading"),clearFormError(a);var e=a.find("[name=new-skill-type-name]").val(),n=a.find("[name=new-skill-type-subtitle]").val(),t=a.find("[name=icon-name]").val();$.post(base+"/skills/types",{name:e,subtitle:n,icon:t}).done(function(e){a.removeClass("loading")}).fail(function(e){a.removeClass("loading"),showFormError(a,getError(e))})}),$(".checkbox-featured-project-show-original-cover").checkbox({onChecked:function(){var e=$("#featured-project-banner-dropzone");e.attr("src",e.attr("data-original-cover-src")+"?"+Date.now())},onUnchecked:function(){var e=$("#featured-project-banner-dropzone");e.attr("src",e.attr("data-banner-src")?e.attr("data-banner-src"):e.attr("data-original-cover-src"))}}),$("#featured-project-banner-dropzone").dropzone({url:base+"/uploads?type=featuredProjects",previewsContainer:"#featured-project-banner-dropzone",maxFiles:1,init:function(){this.on("maxfilesexceeded",function(e){this.removeAllFiles(),this.addFile(e)}),this.on("success",function(e){var a=JSON.parse(e.xhr.response);$("[name=featured-project-banner]").val(a.path),$("#featured-project-banner-dropzone").attr("src",a.url+"?"+Date.now()),$("#featured-project-banner-dropzone").attr("data-banner-src",a.url),$(".checkbox-featured-project-show-original-cover").checkbox("uncheck")})}}),$(".btn-save").click(function(){var a=$(this).closest("form");a.addClass("loading");var e=$("[name=featured-project]").parent().dropdown("get value"),n=$("[name=featured-project-text-color]").val(),t=editor.getMarkdown(),o=$(".checkbox-featured-project-show-original-cover").checkbox("is checked"),r=$("[name=featured-project-banner]").val();$.post(base+"/",{introduction:t,featuredProject:e,featuredProjectTextColor:n,featuredProjectShowOriginalCover:o,featuredProjectBanner:r}).done(function(e){window.location=base+"/"}).fail(function(e){a.removeClass("loading"),showFormError(a,getError(e))})}),$(".btn-change-type-icon").popup({on:"click"}),$("body").delegate(".change-icon.popup [name=icon-name]","input",function(){var e=$(this),a=e.closest(".change-icon.popup").prev(),n=e.val();a.removeClass(),a.addClass(n+" circular icon btn-change-type-icon").attr("data-icon",n)}),$("body").delegate(".btn-save-skill","click",function(){var a=$(this).closest("form");a.addClass("loading");var e=a.find("[name=id]").val(),n=a.find("[name=icon]").val(),t=a.find("[name=name]").val(),o=a.find("[name=link]").val(),r=a.find("[name=fluency]").val();$.post(base+"/skills/"+e,{icon:n,name:t,website:o,fluency:r}).done(function(e){}).fail(function(e){showFormError(a,getError(e))}).always(function(){a.removeClass("loading")})}),$("body").delegate(".btn-delete-skill","click",function(){var a=$(this).closest("form");a.addClass("loading");var e=a.find("[name=id]").val();$.ajax({url:base+"/skills/"+e,method:"delete"}).done(function(e){a.parent().remove()}).fail(function(e){showFormError(a,getError(e))}).always(function(){a.removeClass("loading")})}),$("body").delegate(".btn-add-skill","click",function(){var r=$(this).closest("form");r.addClass("loading");var e=r.find("[name=type]").val(),a=r.find("[name=icon]").val(),n=r.find("[name=name]").val(),t=r.find("[name=link]").val(),o=r.find("[name=fluency]").val();$.post(base+"/skills/",{type:e,icon:a,name:n,website:t,fluency:o}).done(function(e){var a=r.parent().parent().find(".skill-template.mobile"),n=r.parent().parent().find(".skill-template.computer"),t=a.clone().insertBefore(a).removeClass("skill-template").show(),o=n.clone().insertAfter(t).removeClass("skill-template").show();t.find("img").attr("src",base+"/"+e.skill.icon),e.skill.website?t.find("[data-param=name]").html('<a href="'+e.skill.website+'" class="header" target="_blank">'+e.skill.name+"</a>"):t.find("[data-param=name]").html('<span class="header">'+e.skill.name+"<span>"),t.find("[data-param=fluency]").text(e.skill.fluency),o.find("[name=id]").val(e.skill.id),o.find("img").attr("src",base+"/"+e.skill.icon),o.find("[name=icon]").val(e.skill.icon),o.find("[name=name]").val(e.skill.name),o.find("[name=link]").val(e.skill.website),o.find("[name=fluency]").val(e.skill.fluency),initSkillDropzone(o.find("img")),r.find("[name=name]").val(""),r.find("[name=icon]").val(""),r.find("[name=fluency]").val(""),r.find("[name=link]").val(""),r.find("img").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB/0lEQVRYhe3Uy04UYRAF4K8HFBBHHOIlYqILExMNJvoOPDYPYdx4XagxxgtiJIMjMNAuqhrbobtnggs3c5JO+r9VnTp1YY455vjPKKqfra2t89pYwDpWcIwRdqc92t7eBovn9ZoosIEBLiaBw7T7ZRYD/0JgCY9F5KN0vohlXMdtPMv9VvTO6XwFT/L9HsYocSIU2EMfD6cZmpVAleflXN8X0R6o1VENBYa4hjtdhmdJwToeJIkjfM//UYvzOol9kY4PQp0zmKZAH4/S8VDIO5jhXYVjUSurbRemKXBT5HbsT7SHMzqvUKSNRnRFcgGXtOe5wsUp5yXW2g6bFChEkQ3y8VGLgyLf7+Tdtnb7hbu4hXf4Wj9sUmAzL487nJcir+/xWgydvmapiySxIOrpRheBDdE6e2mszfkaPuFj7r3N/y4SY1HI93ClicBAFN3PFscVlvACLyf2XyWR5ckHNYxF2q42EbicxrtGZ08U5aHo74poket9IXdbcVcdcRpgvQiPxLDoapvqfDOj2U3CVeEuCpkbh07a/YtcfbGT32oHgQqj/MqGvTaUomUP8K2JwFjk8Icopp6IrOurY9rdlSTwXKiEs3PgBE+FnH3ROk1q9JzNc7U3eb9K6RBvRJ2comkQlaK/18U0bCNwXDsr8TkJT+a/yLvDSedzzDEH/AYLqHgKIyvGVwAAAABJRU5ErkJggg==")}).fail(function(e){showFormError(r,getError(e))}).always(function(){r.removeClass("loading")})}),$("[name=featured-project]").change(function(){var e=$(this),a=e.val(),n=e.parent().find("[data-value="+a+"]"),t=n.text().trim(),o=n.attr("data-project-cover"),r=n.attr("data-project-slug"),i=n.attr("data-featured-project-banner"),l="true"===n.attr("data-featured-project-show-original-cover"),s=n.attr("data-featured-project-text-color");$(".checkbox-featured-project-show-original-cover").checkbox(l?"check":"uncheck"),$(".featured-project-name").text(t),$("#featured-project-banner-dropzone").attr("src",base+"/"+(i&&"false"===l?process(i,Date.now()):process(o,"w1500","c3.5",Date.now()))).attr("data-original-cover-src",base+"/"+process(o,"w1500","c3.5",Date.now())).attr("data-banner-src",base+"/"+process(i,Date.now())),$("[name=featured-project-text-color]").val(s),$(".featured-project-link").attr("href",base+"/projects/"+r).css({display:"block"})});var initSkillDropzone=function(n){n.dropzone({url:base+"/uploads?type=skills",previewsContainer:n.first().getPath(),maxFiles:1,init:function(){this.on("maxfilesexceeded",function(e){this.removeAllFiles(),this.addFile(e)}),this.on("success",function(e){var a=JSON.parse(e.xhr.response);n.parent().find("[name=icon]").val(a.path),n.attr("src",a.url+"?"+Date.now())})}})};$(".skill-icon-dropzone").each(function(){initSkillDropzone($(this))})}var calculateAge=function(e){var a=+new Date(e);return~~((Date.now()-a)/315576e5)};$(".age").text(calculateAge("1992-06-30")),$(".featured.project").on("mouseenter",function(){$(this).find(".overlay").transition("fade up")}),$(".featured.project").on("mouseleave",function(){$(this).find(".overlay").transition("fade up")});