!function(){var t=function(b){var w=jQuery,x="emoji-dialog",k=0,y=[],S=[],C="editormd-logo",E=[C,C+"-1x",C+"-2x",C+"-3x",C+"-4x",C+"-5x",C+"-6x",C+"-7x",C+"-8x"],M={"zh-cn":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},"zh-tw":{toolbar:{emoji:"Emoji 表情"},dialog:{emoji:{title:"Emoji 表情"}}},en:{toolbar:{emoji:"Emoji"},dialog:{emoji:{title:"Emoji"}}}};b.fn.emojiDialog=function(){var i=this.cm,e=this.settings;if(e.emoji){var t=e.pluginPath+x+"/",o=this.editor,m=(i.getCursor(),i.getSelection(),this.classPrefix);w.extend(!0,this.lang,M[this.lang.name]),this.setToolbar();var a,l=this.lang,s=m+x,n=l.dialog.emoji,r=['<div class="'+m+'emoji-dialog-box" style="width: 760px;height: 334px;margin-bottom: 8px;overflow: hidden;">','<div class="'+m+'tab"></div>',"</div>"].join("\n");i.focus(),0<o.find("."+s).length?(a=o.find("."+s),S=[],a.find("a").removeClass("selected"),this.dialogShowMask(a),this.dialogLockScreen(),a.show()):a=this.createDialog({name:s,title:n.title,width:800,height:475,mask:e.dialogShowMask,drag:e.dialogDraggable,content:r,lockScreen:e.dialogLockScreen,maskStyle:{opacity:e.dialogMaskOpacity,backgroundColor:e.dialogMaskBgColor},buttons:{enter:[l.buttons.enter,function(){return i.replaceSelection(S.join(" ")),this.hide().lockScreen(!1).hideMask(),!1}],cancel:[l.buttons.cancel,function(){return this.hide().lockScreen(!1).hideMask(),!1}]}});var d=["Github emoji","Twemoji","Font awesome","Editor.md logo"],c=a.find("."+m+"tab");if(""===c.html()){for(var h='<ul class="'+m+'tab-head">',f=0;f<4;f++){h+="<li"+(0===f?' class="active"':"")+'><a href="javascript:;">'+d[f]+"</a></li>"}h+="</ul>",c.append(h);for(var g='<div class="'+m+'tab-container">',u=0;u<4;u++){g+='<div class="'+m+'tab-box" style="height: 260px;overflow: hidden;overflow-y: auto;'+(0===u?"":"display:none;")+'"></div>'}g+="</div>",c.append(g)}var v=c.find("."+m+"tab-box"),j=["github-emoji","twemoji","font-awesome",C],p=function(){var i=j[k],e=y[i],t=v.eq(k);if(""===t.html()){var o=function(i,e){for(var t="editormd-logo"===e?"5":20,o=Math.ceil(i.length/t),a='<div class="'+m+'grid-table">',l=0;l<o;l++){for(var s='<div class="'+m+'grid-table-row">',n=0;n<t;n++){var r=w.trim(i[l*t+n]);if(void 0!==r&&""!==r){if("github-emoji"===e){var d="+1"===r?"plus1":r;d="moon"===(d="black_large_square"===d?"black_square":d)?"waxing_gibbous_moon":d,d=b.emoji.path+d+b.emoji.ext,s+='<a href="javascript:;" value=":'+r+':" title=":'+r+':" class="'+m+'emoji-btn">'+('<img src="'+d+'" width="24" class="emoji" title="&#58;'+r+'&#58;" alt="&#58;'+r+'&#58;" />')+"</a>"}else if("twemoji"===e){var c=b.twemoji.path+r+b.twemoji.ext;s+='<a href="javascript:;" value=":tw-'+r+':" title=":tw-'+r+':" class="'+m+'emoji-btn">'+('<img src="'+c+'" width="24" title="twemoji-'+r+'" alt="twemoji-'+r+'" class="emoji twemoji" />')+"</a>"}else"font-awesome"===e?s+='<a href="javascript:;" value=":fa-'+r+':" title=":fa-'+r+':" class="'+m+'emoji-btn">'+('<i class="fa fa-'+r+' fa-emoji" title="'+r+'"></i>')+"</a>":"editormd-logo"===e&&(s+='<a href="javascript:;" value=":'+r+':" title=":'+r+':" style="width:20%;" class="'+m+'emoji-btn">'+('<i class="'+r+'" title="Editor.md logo ('+r+')"></i>')+"</a>")}else s+='<a href="javascript:;" value=""></a>'}a+=s+="</div>"}return a+="</div>"};if(0===k)for(var a=0,l=e.length;a<l;a++){var s=0===a?' style="margin: 0 0 10px;"':' style="margin: 10px 0;"';t.append("<h4"+s+">"+e[a].category+"</h4>"),t.append(o(e[a].list,i))}else t.append(o(e,i));t.find("."+m+"emoji-btn").bind(b.mouseOrTouch("click","touchend"),function(){w(this).toggleClass("selected"),w(this).hasClass("selected")&&S.push(w(this).attr("value"))})}};y.length<1?("function"==typeof a.loading&&a.loading(!0),w.getJSON(t+"emoji.json?temp="+Math.random(),function(i){"function"==typeof a.loading&&a.loading(!1),(y=i)[C]=E,p()})):p(),c.find("li").bind(b.mouseOrTouch("click","touchend"),function(){var i=w(this);k=i.index(),i.addClass("active").siblings().removeClass("active"),v.eq(k).show().siblings().hide(),p()})}else alert("settings.emoji == false")}};"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define?define.amd?define(["editormd"],function(i){t(i)}):define(function(i){var e=i("./../../editormd");t(e)}):t(window.editormd)}();