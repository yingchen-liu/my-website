!function(){function h(t,i,e){var r,s,o="M{0},{1}";for(s=(r=2)*e.length+2;r<s;r+=2)o+=" L{"+r+"},{"+(r+1)+"}";var n=[i.x,i.y];for(r=0,s=e.length;r<s;r++)n.push(e[r].x),n.push(e[r].y);var h=t.paper.path(o,n);h.attr("stroke",t.options["element-color"]),h.attr("stroke-width",t.options["line-width"]);var a=t.options.font,x=t.options["font-family"],y=t.options["font-weight"];return a&&h.attr({font:a}),x&&h.attr({"font-family":x}),y&&h.attr({"font-weight":y}),h}function rt(t,i,e,r){var s,o;"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);var n="M{0},{1}";for(o=(s=2)*e.length+2;s<o;s+=2)n+=" L{"+s+"},{"+(s+1)+"}";var h=[i.x,i.y];for(s=0,o=e.length;s<o;s++)h.push(e[s].x),h.push(e[s].y);var a=t.paper.path(n,h);a.attr({stroke:t.options["line-color"],"stroke-width":t.options["line-width"],"arrow-end":t.options["arrow-end"]});var x=t.options.font,y=t.options["font-family"],l=t.options["font-weight"];if(x&&a.attr({font:x}),y&&a.attr({"font-family":y}),l&&a.attr({"font-weight":l}),r){var g=t.paper.text(0,0,r),f=!1,p=e[0];i.y===p.y&&(f=!0);var c=0,d=0;c=i.x,d=i.y,f?(c+=t.options["text-margin"]/2,d-=t.options["text-margin"]):(c+=t.options["text-margin"]/2,d+=t.options["text-margin"]),g.attr({"text-anchor":"start","font-size":t.options["font-size"],fill:t.options["font-color"],x:c,y:d}),x&&g.attr({font:x}),y&&g.attr({"font-family":y}),l&&g.attr({"font-weight":l})}return a}function Y(t,i){i=i||{},this.paper=new Raphael(t),this.options=r.defaults(i,e),this.symbols=[],this.lines=[],this.start=null}function a(t,i,e){this.chart=t,this.group=this.chart.paper.set(),this.symbol=e,this.connectedTo=[],this.symbolType=i.symbolType,this.flowstate=i.flowstate||"future",this.next_direction=i.next&&i.direction_next?i.direction_next:void 0,this.text=this.chart.paper.text(0,0,i.text),i.key&&(this.text.node.id=i.key+"t"),this.text.node.setAttribute("class",this.getAttr("class")+"t"),this.text.attr({"text-anchor":"start",x:this.getAttr("text-margin"),fill:this.getAttr("font-color"),"font-size":this.getAttr("font-size")});var r=this.getAttr("font"),s=this.getAttr("font-family"),o=this.getAttr("font-weight");r&&this.text.attr({font:r}),s&&this.text.attr({"font-family":s}),o&&this.text.attr({"font-weight":o}),i.link&&this.text.attr("href",i.link),i.target&&this.text.attr("target",i.target);var n=this.getAttr("maxWidth");if(n){for(var h=i.text.split(" "),a="",x=0,y=h.length;x<y;x++){var l=h[x];this.text.attr("text",a+" "+l),a+=this.text.getBBox().width>n?"\n"+l:" "+l}this.text.attr("text",a.substring(1))}if(this.group.push(this.text),e){var g=this.getAttr("text-margin");e.attr({fill:this.getAttr("fill"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*g,height:this.text.getBBox().height+2*g}),e.node.setAttribute("class",this.getAttr("class")),i.link&&e.attr("href",i.link),i.target&&e.attr("target",i.target),i.key&&(e.node.id=i.key),this.group.push(e),e.insertBefore(this.text),this.text.attr({y:e.getBBox().height/2}),this.initialize()}}function C(t,i){var e=t.paper.rect(0,0,0,0,20);(i=i||{}).text=i.text||"Start",a.call(this,t,i,e)}function S(t,i){var e=t.paper.rect(0,0,0,0,20);(i=i||{}).text=i.text||"End",a.call(this,t,i,e)}function E(t,i){var e=t.paper.rect(0,0,0,0);a.call(this,t,i=i||{},e)}function z(t,i){var e=t.paper.rect(0,0,0,0);a.call(this,t,i=i||{},e),e.attr({width:this.text.getBBox().width+4*this.getAttr("text-margin")}),this.text.attr({x:2*this.getAttr("text-margin")});var r=t.paper.rect(0,0,0,0);r.attr({x:this.getAttr("text-margin"),stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),width:this.text.getBBox().width+2*this.getAttr("text-margin"),height:this.text.getBBox().height+2*this.getAttr("text-margin"),fill:this.getAttr("fill")}),i.key&&(r.node.id=i.key+"i");var s=this.getAttr("font"),o=this.getAttr("font-family"),n=this.getAttr("font-weight");s&&r.attr({font:s}),o&&r.attr({"font-family":o}),n&&r.attr({"font-weight":n}),i.link&&r.attr("href",i.link),i.target&&r.attr("target",i.target),this.group.push(r),r.insertBefore(this.text),this.initialize()}function P(t,i){a.call(this,t,i=i||{}),this.textMargin=this.getAttr("text-margin"),this.text.attr({x:3*this.textMargin});var e=this.text.getBBox().width+4*this.textMargin,r=this.text.getBBox().height+2*this.textMargin,s=this.textMargin,o=r/2,n=h(t,{x:s,y:o},[{x:s-this.textMargin,y:r},{x:s-this.textMargin+e,y:r},{x:s-this.textMargin+e+2*this.textMargin,y:0},{x:s-this.textMargin+2*this.textMargin,y:0},{x:s,y:o}]);n.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),i.link&&n.attr("href",i.link),i.target&&n.attr("target",i.target),i.key&&(n.node.id=i.key),n.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:n.getBBox().height/2}),this.group.push(n),n.insertBefore(this.text),this.initialize()}function j(t,i){a.call(this,t,i=i||{}),this.textMargin=this.getAttr("text-margin"),this.yes_direction="bottom",this.no_direction="right",i.yes&&i.direction_yes&&i.no&&!i.direction_no?"right"===i.direction_yes?(this.no_direction="bottom",this.yes_direction="right"):(this.no_direction="right",this.yes_direction="bottom"):i.yes&&!i.direction_yes&&i.no&&i.direction_no?"right"===i.direction_no?(this.yes_direction="bottom",this.no_direction="right"):(this.yes_direction="right",this.no_direction="bottom"):(this.yes_direction="bottom",this.no_direction="right"),this.yes_direction=this.yes_direction||"bottom",this.no_direction=this.no_direction||"right",this.text.attr({x:2*this.textMargin});var e=this.text.getBBox().width+3*this.textMargin;e+=e/2;var r=this.text.getBBox().height+2*this.textMargin;r+=r/2;var s=e/4,o=(r=Math.max(.5*e,r))/4;this.text.attr({x:s+this.textMargin/2});var n=h(t,{x:s,y:o},[{x:s-e/4,y:o+r/4},{x:s-e/4+e/2,y:o+r/4+r/2},{x:s-e/4+e,y:o+r/4},{x:s-e/4+e/2,y:o+r/4-r/2},{x:s-e/4,y:o+r/4}]);n.attr({stroke:this.getAttr("element-color"),"stroke-width":this.getAttr("line-width"),fill:this.getAttr("fill")}),i.link&&n.attr("href",i.link),i.target&&n.attr("target",i.target),i.key&&(n.node.id=i.key),n.node.setAttribute("class",this.getAttr("class")),this.text.attr({y:n.getBBox().height/2}),this.group.push(n),n.insertBefore(this.text),this.initialize()}Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null===this)throw new TypeError;var i=Object(this),e=i.length>>>0;if(0===e)return-1;var r=0;if(0<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&1/0!=r&&r!=-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),e<=r)return-1;for(var s=0<=r?r:Math.max(e-Math.abs(r),0);s<e;s++)if(s in i&&i[s]===t)return s;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null===this)throw new TypeError;var i=Object(this),e=i.length>>>0;if(0===e)return-1;var r=e;1<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!=1/0&&r!=-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r))));for(var s=0<=r?Math.min(r,e-1):e-Math.abs(r);0<=s;s--)if(s in i&&i[s]===t)return s;return-1}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var t={};"undefined"!=typeof module&&module.exports?module.exports=t:this.flowchart=this.flowchart||t;var e={x:0,y:0,"line-width":3,"line-length":50,"text-margin":10,"font-size":14,"font-color":"black","line-color":"black","element-color":"black",fill:"white","yes-text":"yes","no-text":"no","arrow-end":"block",class:"flowchart",symbols:{start:{},end:{},condition:{},inputoutput:{},operation:{},subroutine:{}}},r={defaults:function t(i,e){if(!i||"function"==typeof i)return e;var r={};for(var s in e)r[s]=e[s];for(s in i)i[s]&&(r[s]="object"==typeof r[s]?t(r[s],i[s]):i[s]);return r},inherits:function(t,i){if("function"==typeof Object.create)t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}});else{t.super_=i;var e=function(){};e.prototype=i.prototype,t.prototype=new e,t.prototype.constructor=t}}};Y.prototype.handle=function(i){this.symbols.indexOf(i)<=-1&&this.symbols.push(i);var e=this;return i instanceof j?(i.yes=function(t){return i.yes_symbol=t,i.no_symbol&&(i.pathOk=!0),e.handle(t)},i.no=function(t){return i.no_symbol=t,i.yes_symbol&&(i.pathOk=!0),e.handle(t)}):i.then=function(t){return i.next=t,i.pathOk=!0,e.handle(t)},i},Y.prototype.startWith=function(t){return this.start=t,this.handle(t)},Y.prototype.render=function(){var t,i=0,e=0,r=0,s=0,o=0,n=0;for(r=0,s=this.symbols.length;r<s;r++)(t=this.symbols[r]).width>i&&(i=t.width),t.height>e&&(e=t.height);for(r=0,s=this.symbols.length;r<s;r++)(t=this.symbols[r]).shiftX(this.options.x+(i-t.width)/2+this.options["line-width"]),t.shiftY(this.options.y+(e-t.height)/2+this.options["line-width"]);for(this.start.render(),r=0,s=this.symbols.length;r<s;r++)(t=this.symbols[r]).renderLines();for(o=this.maxXFromLine,r=0,s=this.symbols.length;r<s;r++){var h=(t=this.symbols[r]).getX()+t.width,a=t.getY()+t.height;o<h&&(o=h),n<a&&(n=a)}this.paper.setSize(o+this.options["line-width"],n+this.options["line-width"])},Y.prototype.clean=function(){if(this.paper){var t=this.paper.canvas;t.parentNode.removeChild(t)}},a.prototype.getAttr=function(t){if(this.chart){var i,e=this.chart.options?this.chart.options[t]:void 0,r=this.chart.options.symbols?this.chart.options.symbols[this.symbolType][t]:void 0;return this.chart.options.flowstate&&this.chart.options.flowstate[this.flowstate]&&(i=this.chart.options.flowstate[this.flowstate][t]),i||r||e}},a.prototype.initialize=function(){this.group.transform("t"+this.getAttr("line-width")+","+this.getAttr("line-width")),this.width=this.group.getBBox().width,this.height=this.group.getBBox().height},a.prototype.getCenter=function(){return{x:this.getX()+this.width/2,y:this.getY()+this.height/2}},a.prototype.getX=function(){return this.group.getBBox().x},a.prototype.getY=function(){return this.group.getBBox().y},a.prototype.shiftX=function(t){this.group.transform("t"+(this.getX()+t)+","+this.getY())},a.prototype.setX=function(t){this.group.transform("t"+t+","+this.getY())},a.prototype.shiftY=function(t){this.group.transform("t"+this.getX()+","+(this.getY()+t))},a.prototype.setY=function(t){this.group.transform("t"+this.getX()+","+t)},a.prototype.getTop=function(){var t=this.getY();return{x:this.getX()+this.width/2,y:t}},a.prototype.getBottom=function(){var t=this.getY()+this.height;return{x:this.getX()+this.width/2,y:t}},a.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX(),y:t}},a.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width,y:t}},a.prototype.render=function(){if(this.next){var n=this.getAttr("line-length");if("right"===this.next_direction){var t=this.getRight();if(this.next.getLeft(),!this.next.isPositioned){this.next.setY(t.y-this.next.height/2),this.next.shiftX(this.group.getBBox().x+this.width+n);var h=this;!function t(){for(var i,e=!1,r=0,s=h.chart.symbols.length;r<s;r++){i=h.chart.symbols[r];var o=Math.abs(i.getCenter().x-h.next.getCenter().x);if(i.getCenter().y>h.next.getCenter().y&&o<=h.next.width/2){e=!0;break}}e&&(h.next.setX(i.getX()+i.width+n),t())}(),this.next.isPositioned=!0,this.next.render()}}else{var i=this.getBottom();this.next.getTop(),this.next.isPositioned||(this.next.shiftY(this.getY()+this.height+n),this.next.setX(i.x-this.next.width/2),this.next.isPositioned=!0,this.next.render())}}},a.prototype.renderLines=function(){this.next&&(this.next_direction?this.drawLineTo(this.next,"",this.next_direction):this.drawLineTo(this.next))},a.prototype.drawLineTo=function(t,i,e){this.connectedTo.indexOf(t)<0&&this.connectedTo.push(t);var r,s,o,n,h,a,x,y,l,g,f,p,c,d,u=this.getCenter().x,m=this.getCenter().y,b=(this.getTop(),this.getRight()),v=this.getBottom(),w=this.getLeft(),k=t.getCenter().x,_=t.getCenter().y,B=t.getTop(),A=t.getRight(),O=(t.getBottom(),t.getLeft()),L=u===k,M=m===_,T=m<_,X=_<m,Y=k<u,C=u<k,S=0,E=this.getAttr("line-length"),z=this.getAttr("line-width");if(e&&"bottom"!==e||!L||!T)if(e&&"right"!==e||!M||!C)if(e&&"left"!==e||!M||!Y)if(e&&"right"!==e||!L||!X)if(e&&"right"!==e||!L||!T)if(e&&"bottom"!==e||!Y)if(e&&"bottom"!==e||!C)if(e&&"right"===e&&Y)r=rt(this.chart,b,[{x:b.x+E/2,y:b.y},{x:b.x+E/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.rightStart=!0,t.topEnd=!0,S=b.x+E/2;else if(e&&"right"===e&&C)r=rt(this.chart,b,[{x:B.x,y:b.y},{x:B.x,y:B.y}],i),this.rightStart=!0,t.topEnd=!0,S=b.x+E/2;else if(e&&"bottom"===e&&L&&X)r=rt(this.chart,v,[{x:v.x,y:v.y+E/2},{x:b.x+E/2,y:v.y+E/2},{x:b.x+E/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.bottomStart=!0,t.topEnd=!0,S=v.x+E/2;else if("left"===e&&L&&X){var P=w.x-E/2;O.x<w.x&&(P=O.x-E/2),r=rt(this.chart,w,[{x:P,y:w.y},{x:P,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.leftStart=!0,t.topEnd=!0,S=w.x}else"left"===e&&(r=rt(this.chart,w,[{x:B.x+(w.x-B.x)/2,y:w.y},{x:B.x+(w.x-B.x)/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.leftStart=!0,t.topEnd=!0,S=w.x);else r=rt(this.chart,v,[{x:v.x,y:v.y+E/2},{x:v.x+(v.x-B.x)/2,y:v.y+E/2},{x:v.x+(v.x-B.x)/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.bottomStart=!0,t.topEnd=!0,S=v.x+(v.x-B.x)/2;else r=this.leftEnd&&X?rt(this.chart,v,[{x:v.x,y:v.y+E/2},{x:v.x+(v.x-B.x)/2,y:v.y+E/2},{x:v.x+(v.x-B.x)/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i):rt(this.chart,v,[{x:v.x,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.bottomStart=!0,t.topEnd=!0,S=v.x+(v.x-B.x)/2;else r=rt(this.chart,b,[{x:b.x+E/2,y:b.y},{x:b.x+E/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.rightStart=!0,t.topEnd=!0,S=b.x+E/2;else r=rt(this.chart,b,[{x:b.x+E/2,y:b.y},{x:b.x+E/2,y:B.y-E/2},{x:B.x,y:B.y-E/2},{x:B.x,y:B.y}],i),this.rightStart=!0,t.topEnd=!0,S=b.x+E/2;else r=rt(this.chart,w,A,i),this.leftStart=!0,t.rightEnd=!0,S=A.x;else r=rt(this.chart,b,O,i),this.rightStart=!0,t.leftEnd=!0,S=O.x;else r=rt(this.chart,v,B,i),this.bottomStart=!0,t.topEnd=!0,S=v.x;if(r){for(var j=0,R=this.chart.lines.length;j<R;j++)for(var F=this.chart.lines[j].attr("path"),W=r.attr("path"),N=0,I=F.length-1;N<I;N++){var G=[];G.push(["M",F[N][1],F[N][2]]),G.push(["L",F[N+1][1],F[N+1][2]]);for(var V=G[0][1],$=G[0][2],q=G[1][1],D=G[1][2],H=0,J=W.length-1;H<J;H++){var K=[];K.push(["M",W[H][1],W[H][2]]),K.push(["L",W[H+1][1],W[H+1][2]]);var Q,U=K[0][1],Z=K[0][2],tt=K[1][1],it=K[1][2],et=(d=c=p=f=g=void 0,d={x:null,y:null,onLine1:!1,onLine2:!1},0==(g=((l=it)-(x=Z))*((n=q)-(s=V))-((y=tt)-(a=U))*((h=D)-(o=$)))||(c=(n-s)*(f=o-x)-(h-o)*(p=s-a),f=((y-a)*f-(l-x)*p)/g,p=c/g,d.x=s+f*(n-s),d.y=o+f*(h-o),0<f&&f<1&&(d.onLine1=!0),0<p&&p<1&&(d.onLine2=!0)),d);if(et.onLine1&&et.onLine2)Z===it?tt<U?(Q=["L",et.x+2*z,Z],W.splice(H+1,0,Q),Q=["C",et.x+2*z,Z,et.x,Z-4*z,et.x-2*z,Z]):(Q=["L",et.x-2*z,Z],W.splice(H+1,0,Q),Q=["C",et.x-2*z,Z,et.x,Z-4*z,et.x+2*z,Z]):it<Z?(Q=["L",U,et.y+2*z],W.splice(H+1,0,Q),Q=["C",U,et.y+2*z,U+4*z,et.y,U,et.y-2*z]):(Q=["L",U,et.y-2*z],W.splice(H+1,0,Q),Q=["C",U,et.y-2*z,U+4*z,et.y,U,et.y+2*z]),W.splice(H+2,0,Q),r.attr("path",W),H+=2,2}}this.chart.lines.push(r)}(!this.chart.maxXFromLine||this.chart.maxXFromLine&&S>this.chart.maxXFromLine)&&(this.chart.maxXFromLine=S)},r.inherits(C,a),r.inherits(S,a),r.inherits(E,a),r.inherits(z,a),r.inherits(P,a),P.prototype.getLeft=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.textMargin,y:t}},P.prototype.getRight=function(){var t=this.getY()+this.group.getBBox().height/2;return{x:this.getX()+this.group.getBBox().width-this.textMargin,y:t}},r.inherits(j,a),j.prototype.render=function(){this.yes_direction&&(this[this.yes_direction+"_symbol"]=this.yes_symbol),this.no_direction&&(this[this.no_direction+"_symbol"]=this.no_symbol);var n=this.getAttr("line-length");if(this.bottom_symbol){var t=this.getBottom();this.bottom_symbol.getTop(),this.bottom_symbol.isPositioned||(this.bottom_symbol.shiftY(this.getY()+this.height+n),this.bottom_symbol.setX(t.x-this.bottom_symbol.width/2),this.bottom_symbol.isPositioned=!0,this.bottom_symbol.render())}if(this.right_symbol){var i=this.getRight();if(this.right_symbol.getLeft(),!this.right_symbol.isPositioned){this.right_symbol.setY(i.y-this.right_symbol.height/2),this.right_symbol.shiftX(this.group.getBBox().x+this.width+n);var h=this;!function t(){for(var i,e=!1,r=0,s=h.chart.symbols.length;r<s;r++){i=h.chart.symbols[r];var o=Math.abs(i.getCenter().x-h.right_symbol.getCenter().x);if(i.getCenter().y>h.right_symbol.getCenter().y&&o<=h.right_symbol.width/2){e=!0;break}}e&&(h.right_symbol.setX(i.getX()+i.width+n),t())}(),this.right_symbol.isPositioned=!0,this.right_symbol.render()}}},j.prototype.renderLines=function(){this.yes_symbol&&this.drawLineTo(this.yes_symbol,this.getAttr("yes-text"),this.yes_direction),this.no_symbol&&this.drawLineTo(this.no_symbol,this.getAttr("no-text"),this.no_direction)},t.parse=function(t){function i(t){var i=t.indexOf("(")+1,e=t.indexOf(")");return 0<=i&&0<=e?r.symbols[t.substring(0,i-1)]:r.symbols[t]}t=(t=t||"").trim();for(var r={symbols:{},start:null,drawSVG:function(t,i){var o=this;this.diagram&&this.diagram.clean();var n=new Y(t,i);this.diagram=n;var h={};!function t(i,e,r){var s=function(t){if(h[t.key])return h[t.key];switch(t.symbolType){case"start":h[t.key]=new C(n,t);break;case"end":h[t.key]=new S(n,t);break;case"operation":h[t.key]=new E(n,t);break;case"inputoutput":h[t.key]=new P(n,t);break;case"subroutine":h[t.key]=new z(n,t);break;case"condition":h[t.key]=new j(n,t);break;default:return new Error("Wrong symbol type!")}return h[t.key]}(i);return o.start===i?n.startWith(s):e&&r&&!e.pathOk&&(e instanceof j?(r.yes===i&&e.yes(s),r.no===i&&e.no(s)):e.then(s)),s.pathOk||(s instanceof j?(i.yes&&t(i.yes,s,i),i.no&&t(i.no,s,i)):i.next&&t(i.next,s,i)),s}(this.start),n.render()},clean:function(){this.diagram.clean()}},e=[],s=0,o=1,n=t.length;o<n;o++)if("\n"===t[o]&&"\\"!==t[o-1]){var h=t.substring(s,o);s=o+1,e.push(h.replace(/\\\n/g,"\n"))}s<t.length&&e.push(t.substr(s));for(var a=1,x=e.length;a<x;){var y=e[a];y.indexOf(": ")<0&&y.indexOf("(")<0&&y.indexOf(")")<0&&y.indexOf("->")<0&&y.indexOf("=>")<0?(e[a-1]+="\n"+y,e.splice(a,1),x--):a++}for(;0<e.length;){var l=e.splice(0,1)[0];if(0<=l.indexOf("=>")){var g,f=l.split("=>"),p={key:f[0],symbolType:f[1],text:null,link:null,target:null,flowstate:null};if(0<=p.symbolType.indexOf(": ")&&(g=p.symbolType.split(": "),p.symbolType=g[0],p.text=g[1]),p.text&&0<=p.text.indexOf(":>")?(g=p.text.split(":>"),p.text=g[0],p.link=g[1]):0<=p.symbolType.indexOf(":>")&&(g=p.symbolType.split(":>"),p.symbolType=g[0],p.link=g[1]),0<=p.symbolType.indexOf("\n")&&(p.symbolType=p.symbolType.split("\n")[0]),p.link){var c=p.link.indexOf("[")+1,d=p.link.indexOf("]");0<=c&&0<=d&&(p.target=p.link.substring(c,d),p.link=p.link.substring(0,c-1))}if(p.text&&0<=p.text.indexOf("|")){var u=p.text.split("|");p.text=u[0],p.flowstate=u[1].trim()}r.symbols[p.key]=p}else if(0<=l.indexOf("->"))for(var m=l.split("->"),b=0,v=m.length;b<v;b++){var w=m[b],k=i(w),_=(M=void 0,M="next",T=(L=w).indexOf("(")+1,X=L.indexOf(")"),0<=T&&0<=X&&(M=w.substring(T,X)).indexOf(",")<0&&"yes"!==M&&"no"!==M&&(M="next, "+M),M),B=null;if(0<=_.indexOf(",")){var A=_.split(",");_=A[0],B=A[1].trim()}if(r.start||(r.start=k),b+1<v){var O=m[b+1];k[_]=i(O),k["direction_"+_]=B,B=null}}}var L,M,T,X;return r}}();