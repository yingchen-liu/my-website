!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("sass",function(f){var n=new RegExp("^"+["true","false","null","auto"].join("|")),o=new RegExp("^"+["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"].join("|")),i=/^::?[a-zA-Z_][\w\-]*/;function a(e,t){var r=e.peek();return")"===r?(e.next(),t.tokenizer=m,"operator"):"("===r?(e.next(),e.eatSpace(),"operator"):(t.tokenizer="'"===r||'"'===r?c(e.next()):c(")",!1),"string")}function u(r,n){return function(e,t){return e.sol()&&e.indentation()<=r?(t.tokenizer=m)(e,t):(n&&e.skipTo("*/")?(e.next(),e.next(),t.tokenizer=m):e.skipToEnd(),"comment")}}function c(a,u){return null==u&&(u=!0),function e(t,r){var n=t.next(),o=t.peek(),i=t.string.charAt(t.pos-2);return"\\"!==n&&o===a||n===a&&"\\"!==i?(n!==a&&u&&t.next(),r.tokenizer=m,"string"):"#"===n&&"{"===o?(r.tokenizer=s(e),t.next(),"operator"):"string"}}function s(r){return function(e,t){return"}"===e.peek()?(e.next(),t.tokenizer=r,"operator"):m(e,t)}}function p(e){if(0==e.indentCount){e.indentCount++;var t=e.scopes[0].offset+f.indentUnit;e.scopes.unshift({offset:t})}}function l(e){1!=e.scopes.length&&e.scopes.shift()}function m(e,t){var r=e.peek();if(e.match("/*"))return t.tokenizer=u(e.indentation(),!0),t.tokenizer(e,t);if(e.match("//"))return t.tokenizer=u(e.indentation(),!1),t.tokenizer(e,t);if(e.match("#{"))return t.tokenizer=s(m),"operator";if('"'===r||"'"===r)return e.next(),t.tokenizer=c(r),"string";if(t.cursorHalf){if("#"===r&&(e.next(),e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/)))return e.peek()||(t.cursorHalf=0),"number";if(e.match(/^-?[0-9\.]+/))return e.peek()||(t.cursorHalf=0),"number";if(e.match(/^(px|em|in)\b/))return e.peek()||(t.cursorHalf=0),"unit";if(e.match(n))return e.peek()||(t.cursorHalf=0),"keyword";if(e.match(/^url/)&&"("===e.peek())return t.tokenizer=a,e.peek()||(t.cursorHalf=0),"atom";if("$"===r)return e.next(),e.eatWhile(/[\w-]/),e.peek()||(t.cursorHalf=0),"variable-3";if("!"===r)return e.next(),e.peek()||(t.cursorHalf=0),e.match(/^[\w]+/)?"keyword":"operator";if(e.match(o))return e.peek()||(t.cursorHalf=0),"operator";if(e.eatWhile(/[\w-]/))return e.peek()||(t.cursorHalf=0),"attribute";if(!e.peek())return t.cursorHalf=0,null}else{if("."===r){if(e.next(),e.match(/^[\w-]+/))return p(t),"atom";if("#"===e.peek())return p(t),"atom"}if("#"===r){if(e.next(),e.match(/^[\w-]+/))return p(t),"atom";if("#"===e.peek())return p(t),"atom"}if("$"===r)return e.next(),e.eatWhile(/[\w-]/),"variable-2";if(e.match(/^-?[0-9\.]+/))return"number";if(e.match(/^(px|em|in)\b/))return"unit";if(e.match(n))return"keyword";if(e.match(/^url/)&&"("===e.peek())return t.tokenizer=a,"atom";if("="===r&&e.match(/^=[\w-]+/))return p(t),"meta";if("+"===r&&e.match(/^\+[\w-]+/))return"variable-3";if("@"===r&&e.match(/@extend/)&&(e.match(/\s*[\w]/)||l(t)),e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return p(t),"meta";if("@"===r)return e.next(),e.eatWhile(/[\w-]/),"meta";if(e.eatWhile(/[\w-]/))return e.match(/ *: *[\w-\+\$#!\("']/,!1)?"propery":(e.match(/ *:/,!1)?(p(t),t.cursorHalf=1):e.match(/ *,/,!1)||p(t),"atom");if(":"===r)return e.match(i)?"keyword":(e.next(),t.cursorHalf=1,"operator")}return e.match(o)?"operator":(e.next(),null)}return{startState:function(){return{tokenizer:m,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(e,t){var r=function(e,t){e.sol()&&(t.indentCount=0);var r=t.tokenizer(e,t),n=e.current();if("@return"!==n&&"}"!==n||l(t),null!==r){for(var o=e.pos-n.length+f.indentUnit*t.indentCount,i=[],a=0;a<t.scopes.length;a++){var u=t.scopes[a];u.offset<=o&&i.push(u)}t.scopes=i}return r}(e,t);return t.lastToken={style:r,content:e.current()},r},indent:function(e){return e.scopes[0].offset}}}),e.defineMIME("text/x-sass","sass")});