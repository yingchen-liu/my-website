!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("rust",function(){var o,a,e={if:"if-style",while:"if-style",loop:"else-style",else:"else-style",do:"else-style",ret:"else-style",fail:"else-style",break:"atom",cont:"atom",const:"let",resource:"fn",let:"let",fn:"fn",for:"for",alt:"alt",iface:"iface",impl:"impl",type:"type",enum:"enum",mod:"mod",as:"op",true:"atom",false:"atom",assert:"op",check:"op",claim:"op",native:"ignore",unsafe:"ignore",import:"else-style",export:"else-style",copy:"op",log:"op",log_err:"op",use:"op",bind:"op",self:"atom",struct:"enum"},t=function(){for(var e={fn:"fn",block:"fn",obj:"obj"},t="bool uint int i8 i16 i32 i64 u8 u16 u32 u64 float f32 f64 str char".split(" "),n=0,r=t.length;n<r;++n)e[t[n]]="atom";return e}(),i=/[+\-*&%=<>!?|\.@]/;function u(e,t){return o=e,t}function l(e,t){var n=e.next();if('"'==n)return t.tokenize=c,t.tokenize(e,t);if("'"==n)return o="atom",e.eat("\\")?e.skipTo("'")?(e.next(),"string"):"error":(e.next(),e.eat("'")?"string":"error");if("/"==n){if(e.eat("/"))return e.skipToEnd(),"comment";if(e.eat("*"))return t.tokenize=function o(a){return function(e,t){for(var n,r=null;n=e.next();){if("/"==n&&"*"==r){if(1==a){t.tokenize=l;break}return t.tokenize=o(a-1),t.tokenize(e,t)}if("*"==n&&"/"==r)return t.tokenize=o(a+1),t.tokenize(e,t);r=n}return"comment"}}(1),t.tokenize(e,t)}if("#"==n)return e.eat("[")?(o="open-attr",null):(e.eatWhile(/\w/),u("macro","meta"));if(":"==n&&e.match(":<"))return u("op",null);if(n.match(/\d/)||"."==n&&e.eat(/\d/)){var r=!1;return e.match(/^x[\da-f]+/i)||e.match(/^b[01]+/)||(e.eatWhile(/\d/),e.eat(".")&&(r=!0,e.eatWhile(/\d/)),e.match(/^e[+\-]?\d+/i)&&(r=!0)),r?e.match(/^f(?:32|64)/):e.match(/^[ui](?:8|16|32|64)/),u("atom","number")}return n.match(/[()\[\]{}:;,]/)?u(n,null):"-"==n&&e.eat(">")?u("->",null):n.match(i)?(e.eatWhile(i),u("op",null)):(e.eatWhile(/\w/),a=e.current(),e.match(/^::\w/)?(e.backUp(1),u("prefix","variable-2")):t.keywords.propertyIsEnumerable(a)?u(t.keywords[a],a.match(/true|false/)?"atom":"keyword"):u("name","variable"))}function c(e,t){for(var n,r=!1;n=e.next();){if('"'==n&&!r)return t.tokenize=l,u("atom","string");r=!r&&"\\"==n}return u("op","string")}var f={state:null,stream:null,marked:null,cc:null};function m(){for(var e=arguments.length-1;0<=e;e--)f.cc.push(arguments[e])}function d(){return m.apply(null,arguments),!0}function n(t,n){var e=function(){var e=f.state;e.lexical={indented:e.indented,column:f.stream.column(),type:t,prev:e.lexical,info:n}};return e.lex=!0,e}function r(){var e=f.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function s(){f.state.keywords=t}function k(){f.state.keywords=e}function p(t,n){function r(e){return","==e?d(t,r):e==n?d():d(r)}return function(e){return e==n?d():m(t,r)}}function h(e,t){return d(n("stat",t),e,r,y)}function y(e){return"}"==e?d():"let"==e?h(C,"let"):"fn"==e?h($):"type"==e?d(n("stat"),S,x,r,y):"enum"==e?h(I):"mod"==e?h(P):"iface"==e?h(T):"impl"==e?h(q):"open-attr"==e?d(n("]"),p(b,"]"),r):"ignore"==e||e.match(/[\]\);,]/)?d(y):m(n("stat"),b,r,x,y)}function x(e){return";"==e?d():m()}function b(e){return"atom"==e||"name"==e?d(w):"{"==e?d(n("}"),g,r):e.match(/[\[\(]/)?N(e,b):e.match(/[\]\)\};,]/)?m():"if-style"==e?d(b,b):"else-style"==e||"op"==e?d(b):"for"==e?d(F,E,M,b,b):"alt"==e?d(b,H):"fn"==e?d($):"macro"==e?d(L):d()}function w(e){return"."==a?d(v):"::<"==a?d(A,w):"op"==e||":"==a?d(b):"("==e||"["==e?N(e,b):m()}function v(){return a.match(/^\w+$/)?(f.marked="variable",d(w)):m(b)}function g(e){if("op"==e){if("|"==a)return d(j,r,n("}","block"),y);if("||"==a)return d(r,n("}","block"),y)}return"mutable"==a||a.match(/^\w+$/)&&":"==f.stream.peek()&&!f.stream.match("::",!1)?m(z(b)):m(y)}function z(n){return function e(t){return"mutable"==a||"with"==a?(f.marked="keyword",d(e)):a.match(/^\w*$/)?(f.marked="variable",d(e)):":"==t?d(n,e):"}"==t?d():d(e)}}function j(e){return"name"==e?(f.marked="def",d(j)):"op"==e&&"|"==a?d():d(j)}function C(e){return e.match(/[\]\)\};]/)?d():"="==a?d(b,W):","==e?d(C):m(F,E,C)}function W(e){return e.match(/[\]\)\};,]/)?m(C):m(b,W)}function E(e){return":"==e?d(s,_,k):m()}function M(e){return"name"==e&&"in"==a?(f.marked="keyword",d()):m()}function $(e){return"@"==a||"~"==a?(f.marked="keyword",d($)):"name"==e?(f.marked="def",d($)):"<"==a?d(A,$):"{"==e?m(b):"("==e?d(n(")"),p(U,")"),r,$):"->"==e?d(s,_,k,$):";"==e?d():d($)}function S(e){return"name"==e?(f.marked="def",d(S)):"<"==a?d(A,S):"="==a?d(s,_,k):d(S)}function I(e){return"name"==e?(f.marked="def",d(I)):"<"==a?d(A,I):"="==a?d(s,_,k,x):"{"==e?d(n("}"),s,O,k,r):d(I)}function O(e){return"}"==e?d():"("==e?d(n(")"),p(_,")"),r,O):(a.match(/^\w+$/)&&(f.marked="def"),d(O))}function P(e){return"name"==e?(f.marked="def",d(P)):"{"==e?d(n("}"),y,r):m()}function T(e){return"name"==e?(f.marked="def",d(T)):"<"==a?d(A,T):"{"==e?d(n("}"),y,r):m()}function q(e){return"<"==a?d(A,q):"of"==a||"for"==a?(f.marked="keyword",d(_,q)):"name"==e?(f.marked="def",d(q)):"{"==e?d(n("}"),y,r):m()}function A(){return">"==a?d():","==a?d(A):":"==a?d(_,A):m(_,A)}function U(e){return"name"==e?(f.marked="def",d(U)):":"==e?d(s,_,k):m()}function _(e){return"name"==e?(f.marked="variable-3",d(B)):"mutable"==a?(f.marked="keyword",d(_)):"atom"==e?d(B):"op"==e||"obj"==e?d(_):"fn"==e?d(D):"{"==e?d(n("{"),z(_),r):N(e,_)}function B(){return"<"==a?d(A):m()}function D(e){return"("==e?d(n("("),p(_,")"),r,D):"->"==e?d(_):m()}function F(e){return"name"==e?(f.marked="def",d(G)):"atom"==e?d(G):"op"==e?d(F):e.match(/[\]\)\};,]/)?m():N(e,F)}function G(e){return"op"==e&&"."==a?d():"to"==a?(f.marked="keyword",d(F)):m()}function H(e){return"{"==e?d(n("}","alt"),J,r):m()}function J(e){return"}"==e?d():"|"==e?d(J):"when"==a?(f.marked="keyword",d(b,K)):e.match(/[\]\);,]/)?d(J):m(F,K)}function K(e){return"{"==e?d(n("}","alt"),y,r,J):m(J)}function L(e){return e.match(/[\[\(\{]/)?N(e,b):m()}function N(e,t){return"["==e?d(n("]"),p(t,"]"),r):"("==e?d(n(")"),p(t,")"),r):"{"==e?d(n("}"),p(t,"}"),r):d()}return r.lex=s.lex=k.lex=!0,{startState:function(){return{tokenize:l,cc:[],lexical:{indented:-4,column:0,type:"top",align:!1},keywords:e,indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;o=a=null;var n=t.tokenize(e,t);return"comment"==n?n:(t.lexical.hasOwnProperty("align")||(t.lexical.align=!0),"prefix"==o?n:(a||(a=e.current()),function(e,t,n){var r=e.cc;for(f.state=e,f.stream=t,f.marked=null,f.cc=r;;)if((r.length?r.pop():y)(o)){for(;r.length&&r[r.length-1].lex;)r.pop()();return f.marked||n}}(t,e,n)))},indent:function(e,t){if(e.tokenize!=l)return 0;var n=t&&t.charAt(0),r=e.lexical,o=r.type,a=n==o;return"stat"==o?r.indented+4:r.align?r.column+(a?0:1):r.indented+(a?0:"alt"==r.info?2:4)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),e.defineMIME("text/x-rustsrc","rust")});