!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("haxe",function(e,t){var r,i,o=e.indentUnit,u=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),a={type:"atom",style:"atom"},o={type:"attribute",style:"attribute"},u=e("typedef");return{if:t,while:t,else:n,do:n,try:n,return:r,break:r,continue:r,new:r,throw:r,var:e("var"),inline:o,static:o,using:e("import"),public:o,private:o,cast:e("cast"),import:e("import"),macro:e("macro"),function:e("function"),catch:e("catch"),untyped:e("untyped"),callback:e("cb"),for:e("for"),switch:e("switch"),case:e("case"),default:e("default"),in:i,never:e("property_access"),trace:e("trace"),class:u,abstract:u,enum:u,interface:u,typedef:u,extends:u,implements:u,dynamic:u,true:a,false:a,null:a}}(),c=/[+\-*&%=<>!?|]/;function l(e,t,n){return(t.tokenize=n)(e,t)}function f(e,t){for(var n,r=!1;null!=(n=e.next());){if(n==t&&!r)return!1;r=!r&&"\\"==n}return r}function d(e,t,n){return r=e,i=n,t}function s(e,t){var n=e.next();if('"'==n||"'"==n)return l(e,t,(r=n,function(e,t){return f(e,r)||(t.tokenize=s),d("string","string")}));if(/[\[\]{}\(\),;\:\.]/.test(n))return d(n);if("0"==n&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),d("number","number");if(/\d/.test(n)||"-"==n&&e.eat(/\d/))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),d("number","number");if(t.reAllowed&&"~"==n&&e.eat(/\//))return f(e,"/"),e.eatWhile(/[gimsu]/),d("regexp","string-2");if("/"==n)return e.eat("*")?l(e,t,m):e.eat("/")?(e.skipToEnd(),d("comment","comment")):(e.eatWhile(c),d("operator",null,e.current()));if("#"==n)return e.skipToEnd(),d("conditional","meta");if("@"==n)return e.eat(/:/),e.eatWhile(/[\w_]/),d("metadata","meta");if(c.test(n))return e.eatWhile(c),d("operator",null,e.current());if(/[A-Z]/.test(n))return e.eatWhile(/[\w_<>]/),d("type","variable-3",i=e.current());e.eatWhile(/[\w_]/);var r,i=e.current(),a=u.propertyIsEnumerable(i)&&u[i];return a&&t.kwAllowed?d(a.type,a.style,i):d("variable","variable",i)}function m(e,t){for(var n,r=!1;n=e.next();){if("/"==n&&r){t.tokenize=s;break}r="*"==n}return d("comment","comment")}var n={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function a(e,t,n,r,i,a){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=a,null!=r&&(this.align=r)}function p(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0}function v(e,t){if(/[a-z]/.test(t.charAt(0)))return!1;for(var n=e.importedtypes.length,r=0;r<n;r++)if(e.importedtypes[r]==t)return!0}function y(e){for(var t=x.state,n=t.importedtypes;n;n=n.next)if(n.name==e)return;t.importedtypes={name:e,next:t.importedtypes}}var x={state:null,column:null,marked:null,cc:null};function h(){for(var e=arguments.length-1;0<=e;e--)x.cc.push(arguments[e])}function b(){return h.apply(null,arguments),!0}function k(e){var t=x.state;if(t.context){x.marked="def";for(var n=t.localVars;n;n=n.next)if(n.name==e)return;t.localVars={name:e,next:t.localVars}}}var w={name:"this",next:null};function g(){x.state.context||(x.state.localVars=w),x.state.context={prev:x.state.context,vars:x.state.localVars}}function A(){x.state.localVars=x.state.context.vars,x.state.context=x.state.context.prev}function V(t,n){var e=function(){var e=x.state;e.lexical=new a(e.indented,x.stream.column(),t,null,e.lexical,n)};return e.lex=!0,e}function S(){var e=x.state;e.lexical.prev&&(")"==e.lexical.type&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function E(n){return function e(t){return t==n?b():";"==n?h():b(e)}}function W(e){return"@"==e?b(Z):"var"==e?b(V("vardef"),F,E(";"),S):"keyword a"==e?b(V("form"),z,W,S):"keyword b"==e?b(V("form"),W,S):"{"==e?b(V("}"),g,B,S,A):";"==e?b():"attribute"==e?b(T):"function"==e?b(H):"for"==e?b(V("form"),E("("),V(")"),$,E(")"),S,W,S):"variable"==e?b(V("stat"),_):"switch"==e?b(V("form"),z,V("}","switch"),E("{"),B,S,S):"case"==e?b(z,E(":")):"default"==e?b(E(":")):"catch"==e?b(V("form"),g,E("("),N,E(")"),W,S,A):"import"==e?b(O,E(";")):"typedef"==e?b(P):h(V("stat"),z,E(";"),S)}function z(e){return n.hasOwnProperty(e)?b(C):"function"==e?b(H):"keyword c"==e?b(M):"("==e?b(V(")"),M,E(")"),S,C):"operator"==e?b(z):"["==e?b(V("]"),q(z,"]"),S,C):"{"==e?b(V("}"),q(j,"}"),S,C):b()}function M(e){return e.match(/[;\}\)\],]/)?h():h(z)}function C(e,t){return"operator"==e&&/\+\+|--/.test(t)?b(C):"operator"==e||":"==e?b(z):";"!=e?"("==e?b(V(")"),q(z,")"),S,C):"."==e?b(D,C):"["==e?b(V("]"),z,E("]"),S,C):void 0:void 0}function T(e){return"attribute"==e?b(T):"function"==e?b(H):"var"==e?b(F):void 0}function Z(e){return":"==e?b(Z):"variable"==e?b(Z):"("==e?b(V(")"),q(I,")"),S,W):void 0}function I(e){if("variable"==e)return b()}function O(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(y(t),b()):"variable"==e||"property"==e||"."==e||"*"==t?b(O):void 0}function P(e,t){return"variable"==e&&/[A-Z]/.test(t.charAt(0))?(y(t),b()):"type"==e&&/[A-Z]/.test(t.charAt(0))?b():void 0}function _(e){return":"==e?b(S,W):h(C,E(";"),S)}function D(e){if("variable"==e)return x.marked="property",b()}function j(e){if("variable"==e&&(x.marked="property"),n.hasOwnProperty(e))return b(E(":"),z)}function q(t,n){function r(e){return","==e?b(t,r):e==n?b():b(E(n))}return function(e){return e==n?b():h(t,r)}}function B(e){return"}"==e?b():h(W,B)}function F(e,t){return"variable"==e?(k(t),b(J,U)):b()}function U(e,t){return"="==t?b(z,U):","==e?b(F):void 0}function $(e,t){return"variable"==e&&k(t),b(V(")"),g,G,z,S,W,A)}function G(e,t){if("in"==t)return b()}function H(e,t){return"variable"==e?(k(t),b(H)):"new"==t?b(H):"("==e?b(V(")"),g,q(N,")"),S,J,W,A):void 0}function J(e){if(":"==e)return b(K)}function K(e){return"type"==e?b():"variable"==e?b():"{"==e?b(V("}"),q(L,"}"),S):void 0}function L(e){if("variable"==e)return b(J)}function N(e,t){if("variable"==e)return k(t),b(J)}return S.lex=!0,{startState:function(e){return{tokenize:s,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new a((e||0)-o,0,"block",!1),localVars:t.localVars,importedtypes:["Int","Float","String","Void","Std","Bool","Dynamic","Array"],context:t.localVars&&{vars:t.localVars},indented:0}},token:function(e,t){if(e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation()),e.eatSpace())return null;var n=t.tokenize(e,t);return"comment"==r?n:(t.reAllowed=!("operator"!=r&&"keyword c"!=r&&!r.match(/^[\[{}\(,;:]$/)),t.kwAllowed="."!=r,function(e,t,n,r,i){var a=e.cc;for(x.state=e,x.stream=i,x.marked=null,x.cc=a,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);;)if((a.length?a.pop():W)(n,r)){for(;a.length&&a[a.length-1].lex;)a.pop()();return x.marked?x.marked:"variable"==n&&p(e,r)?"variable-2":"variable"==n&&v(e,r)?"variable-3":t}}(t,n,r,i,e))},indent:function(e,t){if(e.tokenize!=s)return 0;var n=t&&t.charAt(0),r=e.lexical;"stat"==r.type&&"}"==n&&(r=r.prev);var i=r.type,a=n==i;return"vardef"==i?r.indented+4:"form"==i&&"{"==n?r.indented:"stat"==i||"form"==i?r.indented+o:"switch"!=r.info||a?r.align?r.column+(a?0:1):r.indented+(a?0:o):r.indented+(/^(?:case|default)\b/.test(t)?o:2*o)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),e.defineMIME("text/x-haxe","haxe"),e.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(e,t){var n=e.peek(),r=e.sol();if("#"==n)return e.skipToEnd(),"comment";if(r&&"-"==n){var i="variable-2";return e.eat(/-/),"-"==e.peek()&&(e.eat(/-/),i="keyword a"),"D"==e.peek()&&(e.eat(/[D]/),i="keyword c",t.define=!0),e.eatWhile(/[A-Z]/i),i}n=e.peek();return 0==t.inString&&"'"==n&&(t.inString=!0,n=e.next()),1==t.inString?(e.skipTo("'")||e.skipToEnd(),"'"==e.peek()&&(e.next(),t.inString=!1),"string"):(e.next(),null)},lineComment:"#"}}),e.defineMIME("text/x-hxml","hxml")});