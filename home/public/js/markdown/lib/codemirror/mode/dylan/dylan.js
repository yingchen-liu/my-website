!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";e.defineMode("dylan",function(e){var t={unnamedDefinition:["interface"],namedDefinition:["module","library","macro","C-struct","C-union","C-function","C-callable-wrapper"],typeParameterizedDefinition:["class","C-subtype","C-mapped-subtype"],otherParameterizedDefinition:["method","function","C-variable","C-address"],constantSimpleDefinition:["constant"],variableSimpleDefinition:["variable"],otherSimpleDefinition:["generic","domain","C-pointer-type","table"],statement:["if","block","begin","method","case","for","select","when","unless","until","while","iterate","profiling","dynamic-bind"],separator:["finally","exception","cleanup","else","elseif","afterwards"],other:["above","below","by","from","handler","in","instance","let","local","otherwise","slot","subclass","then","to","keyed-by","virtual"],signalingCalls:["signal","error","cerror","break","check-type","abort"]};t.otherDefinition=t.unnamedDefinition.concat(t.namedDefinition).concat(t.otherParameterizedDefinition),t.definition=t.typeParameterizedDefinition.concat(t.otherDefinition),t.parameterizedDefinition=t.typeParameterizedDefinition.concat(t.otherParameterizedDefinition),t.simpleDefinition=t.constantSimpleDefinition.concat(t.variableSimpleDefinition).concat(t.otherSimpleDefinition),t.keyword=t.statement.concat(t.separator).concat(t.other);var n="[-_a-zA-Z?!*@<>$%]+",o=new RegExp("^"+n),a={symbolKeyword:n+":",symbolClass:"<"+n+">",symbolGlobal:"\\*"+n+"\\*",symbolConstant:"\\$"+n},l={symbolKeyword:"atom",symbolClass:"tag",symbolGlobal:"variable-2",symbolConstant:"variable-3"};for(var i in a)a.hasOwnProperty(i)&&(a[i]=new RegExp("^"+a[i]));a.keyword=[/^with(?:out)?-[-_a-zA-Z?!*@<>$%]+/];var r={keyword:"keyword",definition:"def",simpleDefinition:"def",signalingCalls:"builtin"},c={},f={};function m(e,n,t){return(n.tokenize=t)(e,n)}function s(e,n,t){return e,t,n}function u(n,e){var t=n.peek();if("'"==t||'"'==t)return n.next(),m(n,e,b(t,"string","string"));if("/"==t)return n.next(),n.eat("*")?m(n,e,d):n.eat("/")?(n.skipToEnd(),s("comment","comment")):(n.skipTo(" "),s("operator","operator"));if(/\d/.test(t))return n.match(/^\d*(?:\.\d*)?(?:e[+\-]?\d+)?/),s("number","number");if("#"==t)return n.next(),'"'==(t=n.peek())?(n.next(),m(n,e,b('"',"symbol","string-2"))):"b"==t?(n.next(),n.eatWhile(/[01]/),s("number","number")):"x"==t?(n.next(),n.eatWhile(/[\da-f]/i),s("number","number")):"o"==t?(n.next(),n.eatWhile(/[0-7]/),s("number","number")):(n.eatWhile(/[-a-zA-Z]/),s("hash","keyword"));if(n.match("end"))return s("end","keyword");for(var i in a)if(a.hasOwnProperty(i)){var r=a[i];if(r instanceof Array&&r.some(function(e){return n.match(e)})||n.match(r))return s(i,l[i],n.current())}return n.match("define")?s("definition","def"):(n.eatWhile(/[\w\-]/),c[n.current()]?s(c[n.current()],f[n.current()],n.current()):n.current().match(o)?s("variable","variable"):(n.next(),s("other","variable-2")))}function d(e,n){for(var t,i=!1;t=e.next();){if("/"==t&&i){n.tokenize=u;break}i="*"==t}return s("comment","comment")}function b(r,o,a){return function(e,n){for(var t,i=!1;null!=(t=e.next());)if(t==r){i=!0;break}return i&&(n.tokenize=u),s(o,a)}}return["keyword","definition","simpleDefinition","signalingCalls"].forEach(function(n){t[n].forEach(function(e){c[e]=n,f[e]=r[n]})}),{startState:function(){return{tokenize:u,currentIndent:0}},token:function(e,n){return e.eatSpace()?null:n.tokenize(e,n)},blockCommentStart:"/*",blockCommentEnd:"*/"}}),e.defineMIME("text/x-dylan","dylan")});