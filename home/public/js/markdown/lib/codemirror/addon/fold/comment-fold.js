!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(C){"use strict";C.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var n=e.getModeAt(t),o=n.blockCommentStart,r=n.blockCommentEnd;if(o&&r){for(var i,f=t.line,l=e.getLine(f),c=t.ch,m=0;;){var a=c<=0?-1:l.lastIndexOf(o,c-1);if(-1!=a){if(1==m&&a<t.ch)return;if(/comment/.test(e.getTokenTypeAt(C.Pos(f,a+1)))){i=a+o.length;break}c=a-1}else{if(1==m)return;m=1,c=l.length}}var d,u,b=1,s=e.lastLine();e:for(var g=f;g<=s;++g)for(var h=e.getLine(g),k=g==f?i:0;;){var v=h.indexOf(o,k),p=h.indexOf(r,k);if(v<0&&(v=h.length),p<0&&(p=h.length),(k=Math.min(v,p))==h.length)break;if(k==v)++b;else if(!--b){d=g,u=k;break e}++k}if(null!=d&&(f!=d||u!=i))return{from:C.Pos(f,i),to:C.Pos(d,u)}}})});