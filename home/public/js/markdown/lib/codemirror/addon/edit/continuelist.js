!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){"use strict";var m=/^(\s*)(>[> ]*|[*+-]\s|(\d+)\.)(\s*)/,p=/^(\s*)(>[> ]*|[*+-]|(\d+)\.)(\s*)$/,h=/[*+-]\s/;u.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return u.Pass;for(var n=e.listSelections(),t=[],i=0;i<n.length;i++){var o,r=n[i].head,d=e.getStateAfter(r.line),l=!1!==d.list,s=!1!==d.quote;if(!n[i].empty()||!l&&!s||!(o=e.getLine(r.line).match(m)))return void e.execCommand("newlineAndIndent");if(e.getLine(r.line).match(p))e.replaceRange("",{line:r.line,ch:0},{line:r.line,ch:r.ch+1}),t[i]="\n";else{var c=o[1],a=o[4],f=h.test(o[2])||0<=o[2].indexOf(">")?o[2]:parseInt(o[3],10)+1+".";t[i]="\n"+c+f+a}}e.replaceSelections(t)}});