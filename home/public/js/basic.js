var base=$("#var-base").val(),getError=function(e){return e.responseJSON?e.responseJSON.err:e.responseText?{msg:e.responseText}:{msg:e.status+"("+e.statusText+")"}};jQuery.fn.extend({getPath:function(){var s=[];return this.each(function(e,o){for(var t,r=jQuery(o);r.length;){var n=r.get(0),a=n.localName;if(!a)break;a=a.toLowerCase();var i=r.parent();if(1<i.children(a).length)allSiblings=i.children(),0<(e=allSiblings.index(n)+1)&&(a+=":nth-child("+e+")");t=a+(t?" > "+t:""),r=i}s.push(t)}),s.join(",")}});var clearFormError=function(e){e.find(".error.message").hide(),e.find("[data-param]").removeClass("error").popup("destroy")},showFormError=function(o,e){clearFormError(o),$err=o.find(".error.message"),$err.find("p").text(e.msg),$err.show(),e.fields&&e.fields.map(function(e){o.find("[data-param="+e.param+"]").addClass("error").attr("data-content",e.msg).popup({inline:!0,position:"bottom right",className:{popup:"ui popup error"}})})},process=function(e){for(var o=[],t=1;t<arguments.length;t++)o.push(arguments[t]);return e+"?p="+o.join("-")};$(".message .close").click(function(){$(this).closest(".message").transition("fade")}),$(".ui.dropdown").dropdown(),0<$(".ui.sticky").length&&$(".ui.sticky").sticky({context:".main.area",offset:$(".ui.top.fixed.menu").height()+5}),$(".btn-login-popup").popup({on:"click",lastResort:"bottom right"});var login=function(){var t=$(this).closest("form");t.addClass("loading"),clearFormError(t);var e=t.find("[name=email]").val(),o=md5(md5(t.find("[name=password]").val()));$.post(base+"/users/login",{email:e,password:o}).done(function(e){location.reload()}).fail(function(e,o){t.removeClass("loading"),showFormError(t,getError(e))})};$(".btn-login").click(function(){login.apply(this)}),$(".form-login [type=password]").keyup(function(e){13===e.keyCode&&login.apply(this)}),$(".checkbox-editing-mode").checkbox({onChange:function(){$.post(base+"/users/editing-mode").done(function(){location.reload()}).fail(function(e,o){console.log(getError(e))})}});var getSlug=function(e){return e.trim().toLowerCase().replace(/[^\w\d\s-]/gi,"").replace(/\s+/gi,"-")},$anchors=$("a.anchor.auto");if(0<$anchors.length){var autoDetectAnchor=!0,getCurrentAnchorName=function(e){if($(window).scrollTop()<=$(e.get(0)).offset().top)return $(e.get(0)).attr("name");for(var o=0;o<e.length;o++){var t=$(e.get(o));if(!(o<e.length-1))return t.attr("name");if($(window).scrollTop()>t.offset().top&&$(window).scrollTop()<=$(e.get(o+1)).offset().top)return t.attr("name")}},switchActive=function(e){$(".anchor.items .active.anchor.item").removeClass("active"),$('.anchor.items .anchor.item[data-anchor="'+e+'"]').addClass("active")};$(window).on("scroll",function(){autoDetectAnchor&&switchActive(getCurrentAnchorName($anchors))}),$(document).delegate(".anchor.item","click",function(){var e=$(this).attr("data-anchor");switchActive(e),autoDetectAnchor=!1,$("html, body").animate({scrollTop:$('a[name="'+e+'"]').offset().top},200,function(){setTimeout(function(){autoDetectAnchor=!0},100)})})}$(".current-year").text((new Date).getFullYear());